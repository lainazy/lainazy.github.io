<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>凌子亦 · 📙 | web安全及处理</title>
    <meta name="description" content="写写笔记什么的">
    
    
    <link rel="preload" href="/assets/css/0.styles.c4669b9b.css" as="style"><link rel="preload" href="/assets/js/app.3681f687.js" as="script"><link rel="preload" href="/assets/js/2.7e8556b8.js" as="script"><link rel="prefetch" href="/assets/js/14.01a12aed.js"><link rel="prefetch" href="/assets/js/1.79e91ea3.js"><link rel="prefetch" href="/assets/js/3.70d4f9b7.js"><link rel="prefetch" href="/assets/js/4.aa815117.js"><link rel="prefetch" href="/assets/js/5.57119d85.js"><link rel="prefetch" href="/assets/js/6.0a80ff83.js"><link rel="prefetch" href="/assets/js/7.e6c6f51a.js"><link rel="prefetch" href="/assets/js/8.64d123c3.js"><link rel="prefetch" href="/assets/js/9.5fc801b0.js"><link rel="prefetch" href="/assets/js/10.a985a241.js"><link rel="prefetch" href="/assets/js/11.00572892.js"><link rel="prefetch" href="/assets/js/12.8ed540dd.js"><link rel="prefetch" href="/assets/js/13.83e6fb9b.js"><link rel="prefetch" href="/assets/js/15.ffcd0199.js"><link rel="prefetch" href="/assets/js/16.8ba4a225.js"><link rel="prefetch" href="/assets/js/17.ebd63263.js"><link rel="prefetch" href="/assets/js/18.97452dce.js"><link rel="prefetch" href="/assets/js/19.55416f59.js"><link rel="prefetch" href="/assets/js/20.69494a9a.js"><link rel="prefetch" href="/assets/js/21.84cbdbe9.js"><link rel="prefetch" href="/assets/js/22.c6401b09.js"><link rel="prefetch" href="/assets/js/23.c8a50afe.js"><link rel="prefetch" href="/assets/js/24.15eae7cb.js"><link rel="prefetch" href="/assets/js/25.3ef7ac3e.js"><link rel="prefetch" href="/assets/js/26.0ddc27ca.js"><link rel="prefetch" href="/assets/js/27.d8311d7d.js"><link rel="prefetch" href="/assets/js/28.7c8da951.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c4669b9b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      凌子亦 · 📙
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Articles</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/jottings/" class="nav-link router-link-active">随笔</a></li><li class="dropdown-item"><!----><a href="/blogs/" class="nav-link">博客</a></li></ul></div></div><a href="https://github.com/lainazy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Articles</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/jottings/" class="nav-link router-link-active">随笔</a></li><li class="dropdown-item"><!----><a href="/blogs/" class="nav-link">博客</a></li></ul></div></div><a href="https://github.com/lainazy" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>自主学习</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/learn-by-self.html" class="sidebar-link">杂记</a></li><li><a href="/jottings/design-pattern.html" class="sidebar-link">设计模式</a></li><li><a href="/jottings/web-security.html" class="active sidebar-link">web安全及处理</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>浏览器</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/browser-study.html" class="sidebar-link">浏览器学习记录</a></li><li><a href="/jottings/network.html" class="sidebar-link">网络数据传输原理</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Http</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/http-status-code.html" class="sidebar-link">http 常见状态码</a></li><li><a href="/jottings/http-study.html" class="sidebar-link">Http 协议相关记录</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Css</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/css-often-used.html" class="sidebar-link">CSS 常用样式记录</a></li><li><a href="/jottings/css-study.html" class="sidebar-link">CSS 学习记录</a></li><li><a href="/jottings/scss.html" class="sidebar-link">Scss 使用指南</a></li><li><a href="/jottings/stylus.html" class="sidebar-link">Stylus 记录</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Javascript</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/js-study.html" class="sidebar-link">Javascript 学习记录</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>DOM</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/dom-study.html" class="sidebar-link">DOM 笔记</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Vue</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/vuepress-use.html" class="sidebar-link">VuePress 使用指南</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>React</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/react-hooks.html" class="sidebar-link">React Hooks</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Webpack</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/webpack.html" class="sidebar-link">Webpack相关记录</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Git</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/git-cmd.html" class="sidebar-link">Git 命令</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Linux</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/linux-cmd.html" class="sidebar-link">Linux 命令学习记录</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Docker</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/docker-often-used.html" class="sidebar-link">Docker 常用命令记录</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>项目规范</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/husky.html" class="sidebar-link">husky &amp; lint-staged 使用记录</a></li><li><a href="/jottings/commitlint.html" class="sidebar-link">commitizen &amp; commitlint 使用记录</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>持续集成</span><!----></p><ul class="sidebar-group-items"><li><a href="/jottings/travis-use.html" class="sidebar-link">Travis CI 使用摘要</a></li><li><a href="/jottings/gitlab-ci-use.html" class="sidebar-link">Gitlab CI 使用摘要</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="web安全及处理"><a href="#web安全及处理" aria-hidden="true" class="header-anchor">#</a> web安全及处理</h1><h3 id="sql注入"><a href="#sql注入" aria-hidden="true" class="header-anchor">#</a> SQL注入</h3><p>攻击原理：后端有时候需要从前端发送的请求中获取数据(get请求url的querystring、post请求的databody)并拼接到原SQL语句中来做数据库操作，攻击者将SQL代码添加到前端请求中传递给后端，并通过特殊的写法改写了原SQL的执行逻辑或执行了注入的恶意SQL代码，从而达到增删改查数据库的目的。</p><p><strong>如何预防？</strong></p><ol><li>对用户的输入进行校验、转义</li></ol><ul><li>解释：通过正则表达式匹配一些关键字符，如单引号、双减号、分号(分隔符)、井号(注释符)等，匹配成功后对其进行修改(拦截或转义)，从而让攻击者的SQL代码无效化。</li><li>解决：前端、后端</li></ul><ol start="2"><li>不使用SQL语句拼接的方式来嵌入用户输入，使用预编译(参数化)语句替代</li></ol><ul><li>解释：因为注入的SQL代码需要执行才能发挥作用，不使用SQL语句拼接就不会在SQL语句执行时使用用户输入了，所以用户输入中被注入的SQL代码就没用了。</li><li>解决：后端</li></ul><ol start="3"><li>降低访问权限</li></ol><ul><li>解释：该方式无法阻止SQL代码注入，但能最大限度的减少SQL代码注入对数据库带来的危害。</li><li>解决：后端、DBA</li></ul><ol start="4"><li>对敏感数据加密</li></ol><ul><li>解释：该方式无法阻止SQL代码注入，但能防止敏感数据的泄漏。</li><li>解决：后端</li></ul><ol start="5"><li>避免直接向用户显示数据库错误信息</li></ol><ul><li>解释：防止攻击者通过这些错误信息来获取有关数据库的信息，从而找出安全漏洞。</li><li>解决：前端、后端</li></ul><ol start="6"><li>启用Web应用防火墙(WAF)</li></ol><ul><li>解释：Web应用防护墙(Web Application Firewall，简称WAF)是通过执行一系列针对HTTP/HTTPS的安全策略来专门为Web应用提供保护的一款产品，主要用于防御针对网络应用层的攻击，像SQL注入、跨站脚本攻击(XSS)、参数篡改、应用平台漏洞攻击、拒绝服务攻击等。WAF部署在web应用程序前面，在用户请求到达web服务器前对用户请求进行扫描和过滤，分析并校验每个用户请求的网络包，确保每个用户请求有效且安全，对无效或有攻击行为的请求进行阻断或隔离。</li><li>解决：后端、运维</li></ul><h3 id="xss"><a href="#xss" aria-hidden="true" class="header-anchor">#</a> XSS</h3><p>攻击原理：攻击者将一段JS脚本代码通过某种方式添加到浏览器端解释执行，从而获取用户信息或控制用户浏览器行为。XSS是针对浏览器端的攻击。攻击方式有3种：反射型XSS、存储型XSS、DOM-based XSS。</p><blockquote><p><strong>反射型XSS</strong>：攻击者先修改正常的链接，嵌入一段XSS代码，然后诱导用户去访问这个修改后的链接，就会将XSS代码通过请求发送到服务端，服务端解析请求，提取XSS代码，拼接到HTML代码中发送给浏览器，浏览器执行DOM解析，其中的XSS代码也会被执行。</p><p><strong>存储型XSS</strong>：和反射型的区别在于发送给服务端的XSS代码会被服务器存储下来，以后不需要再发送。例如留言板XSS，攻击者将XSS代码作为留言数据发送给服务器后被存储下来，其他用户查看留言时，也加载了攻击者的留言数据，其中的XSS代码就会被浏览器解析执行。</p><p><strong>DOM-based XSS</strong>：和反射型的区别在于XSS代码不需要服务端处理，前端自己通过JS提取链接或用户输入中的XSS代码并执行。危险的DOM操作有：document.write、innerHTML、url跳转/请求等。</p></blockquote><p><strong>如何预防？</strong></p><ol><li>对Html保留字符进行转义编码</li></ol><ul><li>方案：将 &lt;、&gt;、'、&quot;、/、&amp;、space 转义为实体字符</li><li>解释：Html保留字符转义成实体字符后，XSS代码就失去了执行能力。</li><li>解决：前端、后端</li></ul><ol start="2"><li>对Html Attribute值进行html编码</li></ol><ul><li>方案：除数字、字母以外，其它Unicode值小于256的字符编码成 <code>&amp;#x+16进制;</code> 形式</li><li>解释：比如 <code>&lt;input value=&quot;$value&quot; /&gt;</code> 这种，假如我们使用字符串拼接的方式给 $value 传入 <code>&quot; onclick=&quot;alert('xss')</code> 这样的值，那么结果就会变成 <code>&lt;input value=&quot;&quot; onclick=&quot;alert('xss')&quot; /&gt;</code> 这样，onclick事件就被插入到input元素上，从而XSS代码生效。</li><li>解决：前端、后端</li></ul><ol start="3"><li>对Javascript代码进行js编码</li></ol><ul><li>方案：除数字、字母以外，其它Unicode值小于256的字符编码成 <code>\x+16进制</code> 形式</li><li>解释：html中存在很多支持协议解析的属性，如onclick、onerror、href、src等，这些属性我们无法通过html编码来防范XSS攻击。比如 <code>&lt;a href=&quot;javascript:alert('xss')&quot;&gt;xss&lt;/a&gt;</code> 这种链接是可以点击的，即使对其进行html编码成 <code>&amp;#x+16进制;</code> 形式，还是可以执行，需要对其进行js编码成 <code>\x+16进制</code> 形式。</li><li>解决：前端、后端</li></ul><ol start="4"><li>对URL参数进行url编码</li></ol><ul><li>方案：encodeURIComponent</li><li>解释：攻击者通常会把XSS代码添加到URL查询参数部分，对其进行url编码就能使XSS代码丧失执行能力。</li><li>解决：前端</li></ul><ol start="5"><li>使用setAttribute、textContent、innerText设置值</li></ol><ul><li>解释：这三种赋值方式的赋值结果都是字符串，没有执行能力。</li><li>解决：前端</li></ul><ol start="6"><li>启用内容安全策略(CSP)</li></ol><ul><li>解释：CSP用来控制网页中哪些资源可以加载和执行，本质上是一个白名单。可以通过禁止非同源script脚本的加载和unsafe-inline/unsafe-eval脚本的执行来防范XSS攻击。</li><li>解决：前端(meta)、后端(header)</li></ul><ol start="7"><li>设置cookie安全策略，如http-only</li></ol><ul><li>解释：服务端设置cookie时，将http-only设置为true，这样前端就无法通过document.cookie来读取cookie值了，攻击者就无法获取用户cookie中的信息。</li><li>解决：后端</li></ul><pre class="language-javascript"><code><span class="token comment">// html编码</span>
<span class="token keyword">function</span> <span class="token function">encodeForHTMLAttibute</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> encoded <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> ch <span class="token operator">=</span> hex <span class="token operator">=</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex">/[A-Za-z0-9]/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      hex <span class="token operator">=</span> <span class="token string">'&amp;#x'</span> <span class="token operator">+</span> ch<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">';'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    encoded <span class="token operator">+=</span> hex<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> encoded<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// js编码</span>
<span class="token keyword">function</span> <span class="token function">encodeForJavascript</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> encoded <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> cc <span class="token operator">=</span> hex <span class="token operator">=</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex">/[A-Za-z0-9]/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      hex <span class="token operator">=</span> <span class="token string">'\\x'</span> <span class="token operator">+</span> cc<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    encoded <span class="token operator">+=</span> hex<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> encoded<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p><a href="https://www.cnblogs.com/tugenhua0707/p/10909284.html" target="_blank" rel="noopener noreferrer">web安全之XSS攻击原理及防范</a><a href="https://www.cnblogs.com/sijidou/p/10695195.html" target="_blank" rel="noopener noreferrer">从xss平台搭建到csp规则</a></p><h3 id="csrf"><a href="#csrf" aria-hidden="true" class="header-anchor">#</a> CSRF</h3><p>攻击原理：用户X访问网站A并登录成功，此时服务端会将用户X的登录信息(sessionId)放在cookie中返回给浏览器，浏览器记录cookie以便下次访问网站A时直接登录。攻击者Y部署了一个恶意网站B，然后用户X又访问了网站B，攻击者通过各种手段(如广告、设置隐藏图片)诱导用户X发起了一个和网站A中相同的请求但是包含攻击代码，该请求会自动携带用户X的cookie信息，如果此时cookie还未失效，校验就会通过，攻击完成。</p><p>CSRF和XSS的区别：</p><ul><li>CSRF需要用户登录后操作，XSS不需要。</li><li>CSRF通过对页面的API请求中注入攻击代码来实现对服务器端的操作，XSS通过植入js脚本到页面中来实现对浏览器端的操作。</li><li>CSRF不需要知道用户cookie的具体内容，XSS针对cookie的攻击需要获取cookie的内容。</li></ul><p><strong>如何预防？</strong></p><ol><li>对请求头中的referer/referrer字段进行校验</li></ol><ul><li>解释：CSRF攻击的请求是从攻击者部署的网站发起的，请求头中的referer字段是攻击者的网站地址，通过对referer字段进行判断，拒绝所有非自己网站发起的请求，即可阻止CSRF攻击。</li><li>解决：后端</li></ul><ol start="2"><li>使用token代替cookie传递用户信息</li></ol><ul><li>解释：CSRF攻击是利用了cookie传递用户信息来做校验的原理，那我们不使用cookie来校验就好了。</li><li>解决：前端+后端</li></ul><ol start="3"><li>对cookie设置SameSite属性</li></ol><ul><li>解释：SameSite属性用来限制请求从第三方网站发起时cookie的发送行为，有3种可选值：Strict、Lax、None。
<ul><li>Strict：请求的url必须和发起请求页面的url属于同一个站点时才会发送cookie，即从第三方页面发起的请求不会发送cookie。比如有网站A和网站B，网站A采用了Strict策略，网站B中有个链接能跳转到网站A，我们登录了网站A，浏览器中存储了对应的cookie，我们下次直接地址栏访问网站A就会自动登录，而从网站B点击链接跳转到网站A时就不会自动登录。</li><li>Lax：允许部分从第三方页面发起的请求携带cookie。共三种情况：链接(a标签、location.href、window.open)、预加载请求(link标签rel=&quot;prerender&quot;)、form表单get方式提交。</li><li>None：不限制cookie发送。chrome80版本之前的默认设置，80版本开始默认值为Lax，想要设置成None，必须同时设置Secure属性(cookie只能通过https协议发送)，否则无效。</li></ul></li><li>解决：后端</li></ul><ol start="4"><li>对安全性要求较高的操作使用验证码</li></ol><ul><li>解释：没什么好说的，增加了一层手动验证机制。</li><li>解决：前端+后端+用户</li></ul><h3 id="中间人攻击"><a href="#中间人攻击" aria-hidden="true" class="header-anchor">#</a> 中间人攻击</h3><p>攻击原理：在通讯的两端(C2S或S2S)之间建立一个拦截点，随后两端之间的所有通讯都会被拦截点拦截。</p><p><strong>如何预防？</strong></p><ol><li>使用https协议</li></ol><ul><li>解释：https协议通过密文传输数据，即便被中间人拦截获取了数据，也都是加密后的数据，这样就不用担心数据泄露。另外，由于中间人没有通讯两端协商产生的加密密钥，也无法伪造数据。</li><li>解决：后端</li></ul><p><a href="https://segmentfault.com/a/1190000013075736" target="_blank" rel="noopener noreferrer">HTTPS中间人攻击及其防范</a></p><h3 id="账号安全策略"><a href="#账号安全策略" aria-hidden="true" class="header-anchor">#</a> 账号安全策略</h3><ol><li>增加密码长度与复杂度</li><li>账号密码传输给服务端之前，先进行MD5加密，服务端存入数据库时，再进行SHA1加密</li><li>新设备登录时，发送短信提醒</li><li>登录后长时间不操作，自动退出登录，通常连接服务器操作时都有这个设置</li><li>通过图形验证码/滑块来区分操作是人为还是机器行为，限制短时间内的重复频繁操作</li><li>通过短信验证码/动态身份验证器进行登录/二次验证</li><li>锁定连续多次密码输入错误的账号</li><li>对长期未登录/未修改密码的账号发消息提醒，建议修改密码</li><li>监测异常行为</li></ol></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/jottings/design-pattern.html" class="prev">
          设计模式
        </a></span><span class="next"><a href="/jottings/browser-study.html">
          浏览器学习记录
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/2.7e8556b8.js" defer></script><script src="/assets/js/app.3681f687.js" defer></script>
  </body>
</html>
